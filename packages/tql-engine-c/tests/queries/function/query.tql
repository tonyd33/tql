#language 'typescript'

-- Doesn't matter where we place the function declaration
fn decorator_name(@class_declaration) {
  @class_declaration.decorator > call_expression.function
}

fn main() {
  > class_declaration {
    @decorator_name <- decorator_name(*);
    @method <- method_without_return_type(*);

    @method_name <- @method.name;
    @class_name <- .name;
    @method { !exists(*.return_type) } && (
      text_eq(@decorator_name, 'Controller') ||
      text_eq(@class_name, 'SpecificClassName')
    );
  }
}

-- Doesn't matter where we place the function declaration
fn method_without_return_type(@class_declaration) {
  @class_declaration.body > method_definition
}
